<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Where M I</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css?family=Dancing+Script|Roboto:300,400&display=swap" rel="stylesheet">

  <!-- Load Leaflet from CDN -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
  integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
  crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
  integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
  crossorigin=""></script>

  <!-- Load Esri Leaflet from CDN -->
  <script src="https://unpkg.com/esri-leaflet@2.3.2/dist/esri-leaflet.js"
  integrity="sha512-6LVib9wGnqVKIClCduEwsCub7iauLXpwrd5njR2J507m3A2a4HXJDLMiSZzjcksag3UluIfuW1KzuWVI5n/cuQ=="
  crossorigin=""></script>

  <!-- Load Esri Leaflet Geocoder from CDN -->
  <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.3.2/dist/esri-leaflet-geocoder.css"
  integrity="sha512-IM3Hs+feyi40yZhDH6kV8vQMg4Fh20s9OzInIIAc4nx7aMYMfo+IenRUekoYsHZqGkREUgx0VvlEsgm7nCDW9g=="
  crossorigin="">
  <script src="https://unpkg.com/esri-leaflet-geocoder@2.3.2/dist/esri-leaflet-geocoder.js"
  integrity="sha512-8twnXcrOGP3WfMvjB0jS5pNigFuIWj4ALwWEgxhZ+mxvjF5/FBPVd5uAxqT8dd2kUmTVK9+yQJ4CmTmSg/sXAQ=="
  crossorigin=""></script>

</head>
<body>
  <div class="site-wrap">
  <header id="home">
    <div class="menu">
      <span class="bar"></span>
    </div>

    <nav class="nav">
      <a href="#" id="logo">Where M I - Browser</a>
      <div class="overlay">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="browser.html">Browser</a></li>
          <li><a href="editor.html">Editor</a></li>
        </ul>
      </div>
      </nav>
      <div id="map"></div>
        <script>
          var map = L.map('map').setView([44.505833, 11.341667], 13);

          L.esri.basemapLayer('Streets').addTo(map);


          // Icons

          var street = L.icon({
            iconUrl: 'images/street-view.svg',
            iconSize:     [30, 60], // size of the icon
            iconAnchor:   [15, 40], // point of the icon which will correspond to marker's location
            popupAnchor:  [0, -40] // point from which the popup should open relative to the iconAnchor
          });

          var classic = L.icon({
            iconUrl: 'images/map-marker.svg',
            iconSize:     [30, 60], // size of the icon
            iconAnchor:   [15, 40], // point of the icon which will correspond to marker's location
            popupAnchor:  [0, -40] // point from which the popup should open relative to the iconAnchor
          });

          // Markers
          var piazzamaggiore = L.marker([44.49369, 11.34305], {icon : classic}).addTo(map).bindPopup("<b>Piazza Maggiore, BO</b><br>44.49369°, 11.34305°");
          var sanpetronio = L.marker([44.492778, 11.343056], {icon : classic}).addTo(map).bindPopup("<b>Basilica di San Petronio, BO</b><br>44.492778°, 11.343056°");
          var duetorri = L.marker([44.494167, 11.346667], {icon : classic}).addTo(map).bindPopup("<b>Le due Torri, BO</b><br>44.494167°, 11.346667°");
          var santostefano = L.marker([44.491985, 11.348727], {icon : classic}).addTo(map).bindPopup("<b>Basilica di Santo Stefano, BO</b><br>44.491985°, 11.348727°");
          var archiginnasio = L.marker([44.492174, 11.343491], {icon : classic}).addTo(map).bindPopup("<b>Archiginnasio, BO</b><br>44.492174°, 11.343491°");
          var finestrella = L.marker([44.498576, 11.345222], {icon : classic}).addTo(map).bindPopup("<b>Finestrella di Via Piella, BO</b><br>44.498576°, 11.345222°");
          var pinacoteca = L.marker([44.4977, 11.353469], {icon : classic}).addTo(map).bindPopup("<b>Pinacoteca Nazionale, BO</b><br>44.4977°, 11.353469°");
          var sanluca = L.marker([44.479117, 11.298069], {icon : classic}).addTo(map).bindPopup("<b>Santuario della Madonna di San Luca, BO</b><br>44.479117°, 11.298069°");
          var santamaria = L.marker([44.493398, 11.344617], {icon : classic}).addTo(map).bindPopup("<b>Santuario della Madonna della vita, BO</b><br>44.493398°, 11.344617°");
          var giardinimargherita = L.marker([44.48431, 11.355896], {icon : classic}).addTo(map).bindPopup("<b>Giardini Margherita, BO</b><br>44.48431°, 11.355896°");
          var mambo = L.marker([44.5025, 11.3369], {icon : classic}).addTo(map).bindPopup("<b>Museo di Arte Moderna MAMbo, BO</b><br>44.5025°, 11.3369°");
          var certosa = L.marker([44.496389, 11.309444], {icon : classic}).addTo(map).bindPopup("<b>Cimitero monumentale della Certosa, BO</b><br>44.496389°, 11.309444°");
          var torreprendiparte = L.marker([44.495975, 11.344775], {icon : classic}).addTo(map).bindPopup("<b>Torre dei Prendiparte, BO</b><br>44.495975°, 11.344775°");
          var palazzoreenzo = L.marker([44.4943, 11.343169], {icon : classic}).addTo(map).bindPopup("<b>Palazzo Re Enzo, BO</b><br>44.4943°, 11.343169°");
          var sanfrancesco = L.marker([44.495, 11.335278], {icon : classic}).addTo(map).bindPopup("<b>Basilica di San Francesco, BO</b><br>44.495°, 11.335278°");


          //Geolocation

          map.locate({setView: true, maxZoom: 16});

          function onLocationFound(e) {
            var radius = e.accuracy;

            L.marker(e.latlng, {icon : street}).addTo(map)
            .bindPopup("You are within " + radius + " meters from this point").openPopup();

            L.circle(e.latlng, radius).addTo(map);
          }

          map.on('locationfound', onLocationFound);

          function onLocationError(e) {
            alert(e.message);
          }

          map.on('locationerror', onLocationError);


          // Searchbox

          var searchControl = L.esri.Geocoding.geosearch().addTo(map);

          var results = L.layerGroup().addTo(map);

          searchControl.on('results', function (data) {
            results.clearLayers();
            for (var i = data.results.length - 1; i >= 0; i--) {
              results.addLayer(L.marker(data.results[i].latlng, {icon : street}).bindPopup("<b>Voi siete qui</b><br>" + data.latlng));
            }
          });

        </script>
    </header>

    <div class="back-to-top">
      <span class="bar1"></span>
      <span class="bar2"></span>
      <span class="bar3"></span>
      <span class="bar4"></span>
    </div>

    <footer>
      <p>Copyright &copyWeb Project: Where M I? - 2019</p>
    </footer>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="js/main.js"></script>
</body>
</html>
